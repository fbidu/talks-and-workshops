<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="keywords" content="api, python, django, rest, fbidu" />
    <meta name="description" content="Slides for a workshop on REST APIs" />
    <title>Seguran√ßa da Informa√ß√£o e de software</title>
    <style>
        @import 'https://fonts.googleapis.com/css?family=Lobster|Kelly+Slab|Raleway|Roboto+Mono';
        .vintage
        {
            background: #425454;
            color: #F4EEB4;
            font-family: 'Raleway', sans-serif;
            line-height: 2em;
            font-size: 1.5em;
        }

        .splash h1{
            font-family: 'Lobster', cursive; !important;
        }

      .vintage h1, .vintage h2{
          color: #ABC39F;
          line-height: 1.3em;
          font-size: 0.5em;
          font-family: 'Kelly Slab';
      }

      .vintage h3
      {
          font-family: 'Raleway', sans-serif;
          font-size: 0.8em;
          line-height: 1em;
      }

      .vintage a {
          color: #55897D;
          text-decoration: none;
      }
      code {
        background: #e7e8e2;
        border-radius: 5px;
        line-height: 1.5em;
      }
      .remark-code, .remark-inline-code { font-family: 'Roboto Mono'; }
      .remark-code-line-highlighted     { background-color: #373832; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: 400;
        margin-bottom: 0;
      }
      .remark-slide-content h1 { font-size: 3em; }
      .remark-slide-content h2 { font-size: 2em; }
      .remark-slide-content h3 { font-size: 1.6em; }
      .footnote {
        position: absolute;
        bottom: 3em;
      }
      li p { line-height: 1.25em; }
      .red { color: #fa0000; }
      .large { font-size: 2em; }

      .pull-left {
        float: left;
        width: 47%;
      }
      .pull-right {
        float: right;
        width: 47%;
      }
      .pull-right ~ p {
        clear: both;
      }
      #slideshow .slide .content code {
        font-size: 0.8em;
      }
      #slideshow .slide .content pre code {
        font-size: 0.9em;
        padding: 15px;
      }

      img {
          max-width: 100%;
          max-height: 100%;
      }

    </style>
  </head>
  <body>
    <textarea id="source">
        class: center, middle, vintage, splash
        # Seguran√ßa da Informa√ß√£o e de Software
        ### por [Felipe "Bidu" Rodrigues](https://felipevr.com)
        ???
        - Todo o conte√∫do de hoje serve pra qualquer linguagem de programa√ß√£o.
        - N√≥s temos alocado um tempo de 8 horas.
        - Vou procurar diversificar bastante a apresenta√ß√£o do conte√∫do e ele est√° dispon√≠vel
        integralmente no meu GitHub, fiquem a vontade pra acompanhar como voc√™s preferirem
        seja s√≥ acompanhando a apresenta√ß√£o aqui, fazendo anota√ß√µes, acompanhando no git, etc
        ---
        class: middle, vintage
        # Apresenta√ß√£o
        - Felipe
        - Ci√™ncia da Computa√ß√£o - UNICAMP
        - PyLadies Campinas
        - Desenvolvedor no [LaCTAD/UNICAMP](http://www.lactad.unicamp.br)
        - Infraestrutura no [Poppin](http://poppin.com)
        ???
        - Meu nome √© Felipe, eu tenho 25 anos e fa√ßo ci√™ncia da computa√ß√£o na UNICAMP.
        - Eu t√¥ na programa√ß√£o faz mais ou menos 10 anos e nesse tempo eu j√° passei por
        diversas lingugagens de programa√ß√£o, ferramentas, t√©cnicas e etc at√© que nos √∫ltimos
        anos eu me envolvi com programa√ß√£o em Python e desenvolvimento Web
        - Adicionalmente eu trabalho tamb√©m com infraestrutura, que √© relacionado com
        colocar os c√≥digos 'no ar' e mant√™-los funcionando
        ---
        class: middle, vintage
        # Agenda
        * Software, Informa√ß√£o e Sociedade
        * Seguran√ßa da Informa√ß√£o e de Software
        * Seguran√ßa e suas Falhas
        * Os Riscos Mais Comuns e o OWASP Top 10
        * Criptografia e Hashing
        ---
        class: center, middle, vintage
        # Software, Informa√ß√£o e Sociedade
        ### Motiva√ß√£o
        ???
        - Desde o surgimento da computa√ß√£o pessoal, o uso de softwares vem crescendo cada vez mais
        - H√° d√©cadas, softwares deixaram de ser coisas utilizadas em universidades e passaram para o cotidiano da popula√ß√£o
        - Atualmente, mesmo o p√∫blico que n√£o usa softwares diretamente, √© dependente dele. Temos sistemas banc√°rios,
        telef√¥nicos, hospitalares, sistemas de vota√ß√£o eletr√¥nica, c√¢meras de seguran√ßa, etc
        - Al√©m disso, os dispositivos "IoT" - aparelhos dom√©sticos como cafeteiras, geladeiras, bab√°s eletr√¥nicas e at√© mesmo l√¢mpadas - v√™m
        crescendo.
        - Tudo isso se encaixa no termo...
        ---
        class: center, middle, vintage
        # Computa√ß√£o Ub√≠qua
        ### a computa√ß√£o que est√° em TODOS os lugares
        ???
        - Cada vez mais a computa√ß√£o est√° integrada em nossas vidas.
        - Uma consequ√™ncia curiosa disso √© que a computa√ß√£o vai, pouco a pouco, desaparecer.
        - Desaparecer n√£o num sentido de deixar de existir mas no sentido de que as pessoas sequer v√£o se dar conta de que est√£o utilizando alguma coisa que envolve software
        - Em 2015, Eric Schmidt do Google, afirmou que a 'Internet ir√° desaparecer'. O que ele quis dizer foi precisamente isso. Vai chegar um momento em que n√≥s s√≥ nos daremos conta da exist√™ncia da Internet quando nossa conex√£o falhar ou quando a conta chegar no fim do m√™s.
        - Essa presen√ßa cada vez mais forte da computa√ß√£o nas nossas vidas torna cada vez mais importante o cuidado com a seguran√ßa dos softwares e da informa√ß√£o.
        ---
        class: vintage, center
        ![Diffie](img/diffie.jpg)

        Whitfield Diffie
        ???
        - Esse senhor √© o Whit Diffie, ele √© um cript√≥grafo e pioneiro na criptografia de chaves p√∫blicas.
        - Diffie come√ßou seu trabalho com criptografia na d√©cada de 70, quando pesquisas nessa √°rea nos EUA eram meio secretas e supervisionadas pela Ag√™ncia de Seguran√ßa Nacional
        - Uma vez - ainda na d√©cada de 70 - sua esposa perguntou pra ele o motivo do interesse dele em criptografia. Ele disse que n√≥s estamos caminhando pra um mundo onde as pessoas v√£o ter rela√ß√µes
        importantes, √≠ntimas e de longo prazo com pessoas que nunca encontraram frente a frente. Eu me preocupo com a privacidade nesse mundo e √© por isso que eu trabalho com
        criptografia.
        - N√≥s estamos no mundo que Diffie previu
        ---
        class: vintage, middle, center
        # Seguran√ßa da Informa√ß√£o e de Software
        ---
        class: vintage, middle, center
        ## Softwares _manipulam_ informa√ß√µes
        ???
        - Essa defini√ß√£o pode parecer um pouco simplista mas ela serve muito bem pra gente come√ßar a estabelecer as rela√ß√µes entre software e informa√ß√£o.
        - Softwares podem receber e guardar informa√ß√µes bem como podem oferecer novas informa√ß√µes com base nas que ele j√° tem.
        - Proteger informa√ß√µes envolve diretamente proteger os softwares que conseguem manipul√°-la. No entanto, proteger apenas softwares e muito menos
        proteger apenas o software que n√≥s escrevemos n√£o √© o bastante para garantir a seguran√ßa das informa√ß√µes armazenadas em algum lugar.
        ---
        class: vintage, middle, center
        ![C√©sar](img/cesar.jpg)

        J√∫lio C√©sar
        ???
        - A preocupa√ß√£o com a seguran√ßa da informa√ß√£o √© bem anterior ao in√≠cio da computa√ß√£o moderna
        - Um dos primeiros registros de um texto codificado √© da Mesopot√¢mia, datado do ano 1500 A.C.
        - J√∫lio C√©sar desenvolveu um m√©todo cl√°ssico de criptografia conhecido como 'Cifra de C√©sar'
        - Na variante original, cada letra do alfabeto era substitu√≠da pela letra que vinha 3 posi√ß√µes antes
        - Cifras de substitui√ß√£o s√£o divertidas, as crian√ßas adoram! Mas n√£o oferecem seguran√ßa alguma.
        ---
        class: vintage
        ## A Tr√≠ade "CIA" da Seguran√ßa da Informa√ß√£o
        1. Confidencialidade
        2. Integridade
        3. Disponibilidade
        ???
        - Esses s√£o os 3 princ√≠pios considerados fundamentais na Seguran√ßa da Informa√ß√£o
        - Confidencialidade diz respeito ao fato de que uma informa√ß√£o deve ser acessada apenas por pessoas autorizadas
        - Integridade √© a quest√£o de que uma informa√ß√£o n√£o pode ser modificada por partes n√£o autorizadas
        - Disponibilidade trata de que uma informa√ß√£o deve estar acess√≠vel quando ela for necess√°ria
        ---
        class: vintage, middle, center
        ![](img/baby_hack.png)

        Quebra de Confidencialidade
        ???
        - A quebra de confidencialidade ocorre quando uma informa√ß√£o √© acessada por partes n√£o autorizadas
        - No caso da not√≠cia, os pais de um beb√™ tinham uma bab√° eletr√¥nica que se conectava na internet, um exemplo de dispositivo "IoT"
        - Um invasor conseguiu acessar a bab√° e come√ßou a conversar com o beb√™ no meio da noite
        - N√£o ficou claro como isso aconteceu mas √© poss√≠vel que a bab√° eletr√¥nica n√£o tinha prote√ß√£o por senha ou possu√≠a uma senha
        padr√£o e permitia seu funcionamento sem que essa senha fosse alterada
        ---
        class: vintage, middle, center
        ![](img/scott.jpg)

        Quebra de Integridade
        ???
        - O homem na foto se chamava Scott Jerome-Parks e ele era um analista de sistemas
        - Em 2007 ele precisou de um tratamento que envolvia radia√ß√£o
        - Parte do protocolo do tratamento envolvia um t√©cnico programar um modelo em um computador e salvar
        - O software em quest√£o era conhecido por travar v√°rias vezes e a empresa respons√°vel j√° havia sido notificada
        - Ao salvar o tratamento do Scott, o computador come√ßou a travar, exibiu uma mensagem de erro e perguntou
        se o usu√°rio desejava salvar o modelo que havia sido criado. O usu√°rio escolheu salvar.
        - No entanto a integridade da informa√ß√£o n√£o foi mantida. O plano foi salvo incorretamente
        - Como consequ√™ncia disso, ao inv√©s da dose de radia√ß√£o recomendada ser utilizada, o equipamento simplesmente
        abriu todos os paineis que serviam pra controlar a dosagem, fazendo com que ele recebesse uma overdose de radia√ß√£o
        - No caso do Scott, al√©m de termos uma falha na gest√£o da informa√ß√£o via software, ocorreu tamb√©m um conjunto de falhas humanas
        - Por exemplo, ele recebeu a dosagem em excesso por tr√™s vezes.
        - Ap√≥s o caso, a empresa respons√°vel publicou uma atualiza√ß√£o do software de controle. Agora, em caso de erro, ao inv√©s do equipamento
        liberar todos os pain√©is, ele fecha, impedindo qualquer dosagem de radia√ß√£o
        ---
        class: vintage, middle, center
        ![](img/mirai.jpg)

        Quebra de Disponibilidade
        ???
        - No ano passado, milhares de dispositivos IoT foram contaminados por um malware conhecido como 'Mirai'
        - O Mirai simplesmente escaneava a internet buscando por dispositivos que ainda utilizavam os nomes de usu√°rio e senhas de f√°brica
        - A rede formada pelo Mirai lan√ßou o maior ataque de DDoS da hist√≥ria - aproximadamente 620 Gbps - contra o blog do jornalista de seguran√ßa Brian Krebs
        - Algumas semanas depois um novo ataque, dessa vez contra a companhia de rede Dyn causou problemas de disponibilidade em diversos sistes como Twitter, Netflix e Reddit
        - Nos dois casos n√≥s tivemos quebra da disponibilidade de informa√ß√µes.
        - Prote√ß√£o contra ataques desse tipo √© complicado. O site do Krebs estava na infraestrutura da Akamai, uma empresa que conta com uma capacidade de rede incr√≠vel e mesmo assim eles precisaram tirar o site do Krebs do ar.
        ---
        class: vintage, middle, center
        # Seguran√ßa e suas Falhas
        ---
        class: vintage, middle, center
        ![](img/trump_wall.png)

        The "Trump Wall"
        ???
        - Donald Trump quer construir um muro na fronteira EUA-Mex.
        - De acordo com estimativas, esse muro deve custar alguma coisa entre US$15 e US$25 bilh√µes de d√≥lares
        - Mesmo com toda essa grana, basta apenas uma pequena falha ao longo dos 3200km de fronteira entre EUA-Mex para que todo esse investimento perca sentido
        - Adicionalmente, a travessia f√≠sica da borda √© apenas um dos caminhos pelo qual imigrantes ilegais podem entrar nos EUA
        - A gente pode tra√ßar uma analogia entre essa situa√ß√£o e a prote√ß√£o dos nossos softwares.
        - Proteger um software √© uma tarefa complexa e deve ser abordada por diversos √¢ngulos.
        - Nossos 'muros' s√£o valida√ß√µes de entradas, mecanismos de checagem e tratamento de exce√ß√µes, boas pr√°ticas de c√≥digo, boas pr√°ticas de configura√ß√£o de servidores, etc
        - No entanto, uma √∫nica falha grave o bastante √© o suficiente para colocar tudo em risco
        ---
        class: vintage, middle, center
        ## Seguran√ßa √© um processo cont√≠nuo, em m√∫ltiplas camadas e deve fazer parte da cultura da empresa
        ???
        - A seguran√ßa n√£o deve ser vista como algo que cai exclusivamente sobre a responsabilidade de uma pessoa. Ela deve ser praticada por todos e pensar na seguran√ßa √© algo que deve acontecer desde a concep√ß√£o inicial da ideia, come√ßar a ser implementada logo nos primeiros prot√≥tipos e melhorada continuamente a cada ciclo
        - Infelizmente, muitas vezes os programadores veem a seguran√ßa como algo que deve ser feita por "outras pessoas" como sysadmins e o pessoal das Opera√ß√µes em geral
        - Algumas vezes, seguran√ßa √© vista como uma perda de tempo. Pra qu√™ gastar tempo com seguran√ßa enquanto eu poderia estar trabalhando numa nova feature pro nosso produto?!
        - Dito isso, seguran√ßa muitas vezes √© considerada 'invis√≠vel'. N√£o √© considerada como uma feature que de alguma forma agrega valor ao produto
        - Pensa s√≥ que a sua empresa acabou de desenvolver a Geladeira do Futuro! Ela mant√©m um registro autom√°tico de tudo que t√° l√° dentro, sugere receitas com os ingredientes dispon√≠veis, toca Netflix pra vc colocar as s√©ries em dia enquanto voc√™ come, equilibra a temperatura interna dela conforme o clima l√° fora, te manda um tweet quando algum alimento vai estragar, etc.
        - Infelizmente, pro consumidor em geral, pouco vai importar quais s√£o os cuidados de seguran√ßa de software envolvidos nessa geladeira na hora de tomar a decis√£o da compra. O consumidor n√£o tem consci√™ncia que talvez as credenciais de acesso que a geladeira usa para as contas do Twitter e Netflix podem ser armazenadas de forma insegura.
        - Muito menos ele tem conhecimento sobre qu√£o segura √© a rela√ß√£o entre a placa de comunica√ß√£o de rede e os outros componentes eletr√¥nicos do funcionamento da geladeira. Imagina s√≥ um motor de uma geladeira entrando em pane atrav√©s de um ataque de rede
        - Na hora de fazer a propaganda desse produto, n√≥s falamos das caracter√≠sticas funcionais dele. Ningu√©m t√° interessado em saber que a geladeira usa criptografia AES de 256 bits para proteger as informa√ß√µes do usu√°rio
        - √â responsabilidade dos desenvolvedores e de toda a empresa garantir que essas quest√µes sejam tratadas
        ---
        class: vintage, middle, center
        ## Alguns conceitos b√°sicos
        ---
        class: vintage, middle, center
        Desconfie de TODA informa√ß√£o que chega na sua aplica√ß√£o atrav√©s de uma fonte que voc√™ n√£o controla totalmente - isso inclui o seu front end!
        ---
        class: vintage, middle, center
        ![](img/hug.jpg)

        N√£o trate informa√ß√µes de fontes externas assim!
        ---
        class: vintage, middle, center
        ![](img/contaminated.jpg)

        Trate assim!
        ???
        - As informa√ß√µes que seu sistema recebe para processamento s√£o um vetor de ataque muito importante
        - Voc√™ n√£o tem controle sobre a m√°quina do cliente, voc√™ n√£o tem como impedir que o usu√°rio digita informa√ß√µes
        que possam levar seu sistema para estados inesperados
        ---
        class: vintage, middle, center
        ![](img/steve-front.jpg)
        ???
        - Por mais cuidado que sua equipe de front tenha com o trabalho deles, no final das contas, o front end √© executado num
        dispositivo que voc√™ n√£o controla.
        - Mesmo em situa√ß√µes em que o usu√°rio passa por diversas valida√ß√µes do lado do front end, essas valida√ß√µes devem ser pensadas
        como algo que contribuem para a experi√™ncia do usu√°rio. Coisas que direcionam o fluxo dele ao longo da aplica√ß√£o e n√£o coisas
        que restringem todos os fluxos poss√≠veis.
        - O usu√°rio pode, mesmo com as restri√ß√µes do front end, executar todo tipo de instru√ß√µes malucas. Vamos falar mais disso mais tarde
        mas, por hora, lembrem-se que √© fundamental que seu c√≥digo valide extensivamente as entradas de dados que recebe
        ---
        class: vintage, middle, center
        N√£o deixe seu sistema "falar demais"
        ???
        - Cuidado com logs de erro que s√£o jogados pro front end! Eles podem indicar caracter√≠stica importantes do sistema e
        at√© mesmo vazer credenciais e outras informa√ß√µes estrat√©gicas do seu c√≥digo.
        - Exce√ß√µes devem ser tratadas pelo front end!
        - O usu√°rio digitou a senha errada. √â realmente necess√°rio falar que ele errou _apenas_ a senha? Dada essa informa√ß√£o,
        um poss√≠vel atacante j√° sabe que ele acertou o nome de usu√°rio :)
        ---
        class: vintage, middle, center
        N√£o pense que a sua API "fala pouco"
        ???
        - Absolutamente TODOS os endpoints da sua API que s√£o utilizados pelo seu front end podem ser facilmente mapeados!
        - Mesmo que o front end n√£o seja escrito numa tecnologia aberta, como javascript, um usu√°rio de um app mobile
        pode facilmente capturar os pacotes de rede que entram e saem do celular e mapear esses endpoints
        - Isso sem contar com engenharia reversa
        ---
        class: vintage, middle, center
        Cuidado com funcionalidades e c√≥digos velhos/desnecess√°rios/nunca totalmente implementados!
        ???
        - Assim como quanto maior um pa√≠s, mais dif√≠cil √© construir um mur√£o em volta dele, quanto maior for
        sua base de c√≥digo, maior ser√° a superf√≠cie de ataque dela.
        - Al√©m disso, c√≥digo velho que n√£o √© mantido mas fica no ar, n√£o recebe mais atualiza√ß√µes e, com o tempo
        n√≥s nos esquecemos dele. No entanto, esses c√≥digos continuam dispon√≠veis para ataques!
        ---
        class: vintage, middle, center
        A seguran√ßa do servidor que roda seu c√≥digo √© t√£o importante quanto a seguran√ßa do seu c√≥digo em si!
        ???
        - De nada adianta seu c√≥digo ser super protegido se o servidor que roda ele √© extremamente vulner√°vel.
        - Al√©m disso, se seu servidor de banco de dados, por exemplo, for vulner√°vel, toda a informa√ß√£o contida
        no software pode ser comprometida
        ---
        class: vintage, middle, center
        Fazer sistemas complicados e obscuros como forma de prote√ß√£o cria uma falsa sensa√ß√£o de seguran√ßa.

        O inimigo conhece o sistema - Claude Shannon
        ???
        - Alguns desenvolvedores e empresas caem na armadilha de pensar que caso eles escrevam c√≥digos e APIs confusas,
        um poss√≠vel ataque ser√° prevenido. No entanto, isso na verdade cria uma falsa sensa√ß√£o de seguran√ßa.
        - Em primeiro lugar, um atacante pode utilizar de ferramentas de an√°lise est√°tica de c√≥digo para desobfuscar
        c√≥digo que rodem do lado do cliente
        - Em segundo lugar, um c√≥digo confuso dificulta a sua manuten√ß√£o e utiliza√ß√£o, o que dificulta a melhoria de
        aspectos de seguran√ßa e todo o trabalho da equipe em geral.
        - Por √∫ltimo, o seu c√≥digo vai ser utilizado _por algu√©m_ - notadamente seus clientes v√°lidos. Caso esses
        pontos terminais n√£o estejam devidamente protegidos, obfusca√ß√£o alguma ir√° te salvar.
        - No fim das contas, ou voc√™ obfusca o seu c√≥digo a ponto dele ser simplesmente in√∫til e, portanto, nem
        deveria existir em primeiro lugar, ou a obfusca√ß√£o √© simplesmente um processo sem sentido que cria uma sensa√ß√£o
        vazia - e errada - de seguran√ßa
        - O enunciado aqui √© uma variante dos [Princ√≠pio de Kerckhoffs](https://en.wikipedia.org/wiki/Kerckhoffs%27s_principle)
        e o resumo em baixo veio de Claude Shannon, o pai da teoria da informa√ß√£o

        ---
        class: vintage
        ** Inje√ß√£o e Prote√ß√£o
        ** Autentica√ß√£o e Controle de Acesso
        ** XSS e CSRF
        ** Componentes e Configura√ß√µes
        ** Prote√ß√£o de Dados Sens√≠veis e APIs
        ---
        class: vintage, middle, center
        # OAUTH &amp; JWT
        ### Autentica√ß√£o
        ---
        class: vintage
        ## OAUTH &amp; JWT
        ### Autentica√ß√£o vs Autoriza√ß√£o
        ![Home](img/homer-id.jpg)
        ???
        * S√£o dois processos diferentes mas que muitos confundem
        * Autentica√ß√£o diz respeito a confirmar que uma pessoa de fato √© quem ela diz que √©
        * Autoriza√ß√£o √© determinar que uma pessoa - j√° devidamente autenticada - pode executar uma determinada a√ß√£o
        * Suponha que voc√™ foi numa festa a fantasia com seu amigo, que est√° fantasiado de Homem de Ferro, com m√°scara e tudo
        * Ent√£o seu amigo pede pra voc√™ guardar a carteira dele enquanto ele vai ao banheiro
        * Depois de um tempo, chega uma pessoa fantasiada de Homem de Ferro e fala "d√° minha carteira"
        * Voc√™ fica na d√∫vida: √© mesmo seu amigo?
        * S√≥ o seu amigo tem *autoriza√ß√£o* para acessar aquela carteira
        * No entanto, voc√™ precisa primeiro *autenticar* que aquela pessoa fantasiada √© o seu amigo
        * Quando a pessoa fantasiada arrancar a m√°scara, voc√™ vai de fato autenticar se aquela pessoa √© seu amigo ou n√£o
        * Se ela for, voc√™ entrega a carteira. Caso contr√°rio, voc√™ segura
        * No mundo "f√≠sico" autentica√ß√µes s√£o feitas usando documentos como o RG
        * No meio digital, o meio mais comum de autentica√ß√£o s√£o usu√°rios e senhas
        ---
        class: vintage
        ## OAUTH &amp; JWT
        ### Basic Auth
        ```
        http://usu√°rio:senha@servidor.com
        ```
        ![basic auth](img/basic-auth.svg)
        ???
        * √â a forma mais b√°sica de autentica√ß√£o na Internet
        * Em cada chamada voc√™ passa o usu√°rio e a senha para autentica√ß√£o
        * √â extremamente simples e f√°cil de ser implementado
        * Para aplica√ß√µes bem simples ainda √© utilizado. No entanto, alguns cuidados devem ser tomados
        * O protocolo HTTP n√£o criptografa nada por padr√£o, ent√£o qualquer ponto no
        'meio do caminho' entre o cliente e o servidor poder√° interceptar o nome de usu√°rio e a senha
        ---
        class: vintage
        ## OAUTH &amp; JWT
        ### Autentica√ß√µes e Autoriza√ß√µes por Token
        ![token auth](img/token-auth.svg)
        ???
        * Diversas implementa√ß√µes diferentes
        * Basicamente o usu√°rio n√£o mais fornece suas credenciais da API para o cliente
        * O usu√°rio pede a um servidor de autentica√ß√£o para gerar um token, que √© basicamente um texto, uma string.
        * Nesse pedido, o usu√°rio conta pro servidor de autentica√ß√£o, em nome de *qual cliente*
        ele est√° gerando aquele token e quais a√ß√µes o usu√°rio quer permitir que o cliente execute em seu nome
        * O usu√°rio vai se autenticar nesse servidor com as suas credenciais, este servidor ir√° valid√°-las
        e ent√£o ir√° gerar esse token, guardando ele atrelado √† conta do usu√°rio
        * O servidor de autentica√ß√£o envia esse token para o cliente
        * A partir desse momento, o cliente vai utilizar esse token para autenticar suas chamadas √† API feitas
        em nome do usu√°rio
        * A API, ao receber uma chamada do cliente, pega o token e consulta de qual usu√°rio √© aquele token
        para fazer a autentica√ß√£o e quais permiss√µes o usu√°rio deu para o portador daquele token
        ---
        class: vintage, middle, center
        ## OAUTH &amp; JWT
        ### Tokens vs Basic Auth
        ???
        * Algumas diferen√ßas importantes. A primeira √© que o usu√°rio n√£o mais envia as credenciais da sua conta
        ao cliente, mas sim a um servidor de autentica√ß√£o
        * Outro ponto importante, no basic auth se um usu√°rio utilizasse 3 clientes diferentes para uma API, por exemplo
        um cliente Android, um no navegador e outro numa Smart TV
        * Nesse cen√°rio, como as mesmas credenciais s√£o usadas para todos os clientes, o usu√°rio n√£o consegue remover
        o acesso de apenas um desses clientes. O m√°ximo que ele pode fazer √© mudar a pr√≥pria senha, revogando o acesso
        de todos eles
        * Com uma autentica√ß√£o baseada em tokens, o usu√°rio pode revogar o acesso de apenas um aplicativo cliente
        * Mais uma quest√£o importante - o usu√°rio pode dar √† clientes diferentes,
        autoriza√ß√µes diferentes sobre sua conta.
        * Outro ponto interessante √© que com tokens, o usu√°rio e a API podem saber qual *cliente*
        executou uma determinada a√ß√£o em nome do usu√°rio pois cada token √© gerado para
        um cliente espec√≠fico
        * Atualmente, a maioria das APIs utiliza alguma estrutura de autentica√ß√£o baseada em tokens
        ---
        class: vintage
        ## OAUTH &amp; JWT
        ### *Man in the Middle*
        ![token auth](img/communication.png)
        ???
        * Normalmente n√≥s percebemos a comunica√ß√£o como sendo simples assim
        * Do lado esquerdo podemos ter, por exemplo, voc√™ no seu navegador querendo abrir a p√°gina
        inicial do Google e do lado direito o servidor do Google
        * A nossa percep√ß√£o √© de que n√≥s enviamos um pedido para o servidor e ele responde
        * Em linhas gerais √© realmente isso que acontece mas n√≥s precisamos dar um 'zoom'
        nessa conex√£o entre os pontos
        ---
        class: vintage
        ## OAUTH &amp; JWT
        ### *Man in the Middle*
        ![token auth](img/real-communication.png)
        ???
        * Essa figura √© mais pr√≥xima da realidade
        * Entre o cliente e o servidor, existem dezenas de outros computadores
        * Antes de um pedido ou de uma resposta chegar ao seu destino, ela passa por todos eles
        * Pode ser o seu roteador de wifi, os computadores do seu provedor de internet, do provedor de internet
        do servidor de destino, etc etc
        * Como d√° pra gente ver, existem v√°rios pontos no 'meio' da comunica√ß√£o entre o cliente e o servidor
        * Al√©m disso, numa comunica√ß√£o HTTP comum eu posso adicionar MAIS pontos entre quaisquer desses que j√°
        existem sem que a comunica√ß√£o sofra
        * Tudo isso tem rela√ß√£o com um tipo de ataque de seguran√ßa chamado 'Man in the Middle' ou,
        literalmente, 'Homem no Meio'
        ---
        class: vintage
        ## OAUTH &amp; JWT
        ### *Man in the Middle*
        ![token auth](img/mitm.png)
        ???
        * Nesse cen√°rio, um ataquente se posiciona no meio da comunica√ß√£o
        * Dessa posi√ß√£o ele consegue interceptar tudo o que √© transmitido entre o cliente e o servidor
        * Ele pode ent√£o fazer todo tipo de coisas divertidas - registrar as transa√ß√µes pedidas, igual
        quando um telefone √© 'grampeado', pode alterar as informa√ß√µes transmitidas, censur√°-las, etc
        * Seja l√° qual for o mecanismo de autentica√ß√£o que o cliente e o servidor da API utilizarem,
        se eles utilizarem do protocolo HTTP sem adicionar nada a mais de seguran√ßa, tudo o que for
        transmitido entre cliente e servidor ser√° intercept√°vel por um atacante
        * Se voc√™ usar Basic Auth, o atacante ir√° ver as credenciais no formato `usu√°rio:senha@servidor`
        * Se voc√™ usar qualquer forma de autentica√ß√£o via token, o atacante poder√° roubar esse token
        ---
        class: vintage
        ## OAUTH &amp; JWT
        ### *Man in the Cloud*
        ![token auth](img/man-in-cloud.jpg)
        ???
        * O ataque de *Man in the Cloud* foi descrito pela primeira vez pela Imperva,
        na confer√™ncia BlackHat de 2015
        * Nas autentica√ß√µes via token, o aplicativo cliente recebe um token e o armazena
        para uso posterior
        * O ataque √© baseado no roubo dessas credenciais que as vezes s√£o armazenadas de forma irregular
        * Esse token roubado pode ser utilizado para fazer chamadas devidamente autenticadas
        * Observe que o *Man in the Middle* √© focado em informa√ß√µes em tr√¢nsito, enquanto o *Man in the Cloud*,
        em informa√ß√µes armazenadas
        * Isso √© mais uma evid√™ncia de como a seguran√ßa dos nossos sistemas √© uma coisa que n√≥s devemos abordar
        de uma forma abrangente e cuidadosa
        ---
        class: vintage
        ## OAUTH &amp; JWT
        ### HTTPS
        ![https](img/https.png)
        ???
        * Em linhas bem gerais, √© uma camada de seguran√ßa sobre a comunica√ß√£o HTTP normal
        * Nos permite garantir que as infor√ß√£oes transmitidas entre cliente e servidor n√£o sejam lidas
        nem modificads por outras pesoaSSS
        ---
        class: vintage, middle, center
        # Fontes
        ---
        class: vintage
        - [**"A internet vai desaparecer" - Eric Schmidt**](https://oglobo.globo.com/sociedade/tecnologia/a-internet-vai-desaparecer-afirma-eric-schmidt-do-google-15134173)
        - [**The CIA Triad**](http://www.techrepublic.com/blog/it-security/the-cia-triad/)
        - [**Scott Jerome-Parks**](http://www.nytimes.com/2010/01/24/health/24radiation.html?pagewanted=1)
        - [**Stranger hacks family's baby monitor and talks to child at night**](http://sfglobe.com/2016/01/06/stranger-hacks-familys-baby-monitor-and-talks-to-child-at-night/)
        - [**Sobre o ataque ao Brian Krebs**](https://krebsonsecurity.com/2016/09/krebsonsecurity-hit-with-record-ddos/)
        - [**The Democratization of Censorship**](https://krebsonsecurity.com/2016/09/the-democratization-of-censorship/)
        ---
        class: vintage, middle, center
        # Obrigado üòÑ

</textarea>
<script src="js/remark-latest.min.js" type="text/javascript"></script>
<script>
  var hljs = remark.highlighter.engine;
</script>
<script src="js/remark.language.js"></script>
<script>
  var slideshow = remark.create({
      highlightStyle: 'monokai',
      highlightLanguage: 'remark',
      highlightLines: true
    }) ;
</script>
</body>
</html>
